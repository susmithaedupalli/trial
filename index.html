<html>
<head>
<title>Web Socket Test</title>

<script src="http://cdn.sockjs.org/sockjs-0.3.4.min.js"></script>
<script src='vertxbus.js'></script>
</head>

<body>
	<script>
var eb = new vertx.EventBus('http://localhost:8080/eventbus');
eb.onopen = function() {
	 alert("eventbus opened ");	
	 eb.send("ping-address", "ping!");
 	 eb.registerHandler("ping-address", function(msg, replyTo) {
 		alert("receiving  ");
         document.getElementById('messages').innerHTML+="<br>"+msg +"   :hi";

       });

}
 function send(message) {
/* 	 if (!eb) {
    	eb = new vertx.EventBus("http://localhost:8080/eventbus");
    	
     }else{ alert(" in else loop eb created ");} */
	
	 eb.send('ping-address', message);
   
 }

 </script>

	<input type="text" name="message" value="Hello, World!" />
	<input type="button" value="Send Web Socket Data"
		onclick="send('Hello World')" />
	<div id="messages">hi</div>

</body>
</html>